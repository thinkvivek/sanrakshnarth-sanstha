<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Control-M Job Dependency Graph</title>
  <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <style>
    #network {
      width: 100%;
      height: 600px;
      border: 1px solid lightgray;
    }
    #details {
      width: 100%;
      height: 200px;
      overflow-y: auto;
      border: 1px solid lightgray;
      padding: 10px;
      font-family: Arial, sans-serif;
    }
    body {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
  </style>
</head>
<body>
  <div id="network"></div>
  <div id="details">Click a job to see details here...</div>

  <script>
    // Hardcoded minimal JSON for testing
    const testData = {
      nodes: [
        { id: "Job1", label: "Job1" },
        { id: "Job2", label: "Job2" }
      ],
      edges: [
        { from: "Job1", to: "Job2" }
      ]
    };

    try {
      const nodes = new vis.DataSet(testData.nodes);
      const edges = new vis.DataSet(testData.edges);
      const container = document.getElementById('network');
      const graphData = { nodes: nodes, edges: edges };
      const options = {
        nodes: { shape: 'dot', size: 15, font: { size: 12 }, borderWidth: 2 },
        edges: { arrows: 'to', smooth: { type: 'curvedCW' } },
        layout: { hierarchical: { direction: 'UD', sortMethod: 'directed' } },
        physics: false
      };

      const network = new vis.Network(container, graphData, options);
      console.log('Graph rendered successfully with test data');
    } catch (error) {
      console.error('Error with test data:', error);
      document.getElementById('details').innerHTML = `Test Error: ${error.message}`;
    }
  </script>
</body>
</html>
